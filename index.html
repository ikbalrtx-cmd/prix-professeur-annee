<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ÙˆØ±Ù‚Ø© ØªØ¹Ø±ÙŠÙÙŠØ© Ø¨Ø£Ù†Ø¯ÙŠØ© Ø¬Ø§Ø¦Ø²Ø© Ø£Ø³ØªØ§Ø°(Ø©) Ø§Ù„Ø³Ù†Ø© Ø­Ø³Ø¨ Ø§Ù„Ø¬Ù‡Ø§Øª</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Cairo:wght@300;400;600;700;800&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
    <style>
        *, *::before, *::after { margin: 0; padding: 0; box-sizing: border-box; }

        :root {
            --green-dark:  #1f3a2c;
            --green-mid:   #2d5440;
            --green-light: #3a6b50;
            --gold:        #c9a030;
            --gold-light:  #e0b84a;
            --gold-pale:   #fdf8ec;
            --gold-fill:   rgba(201,160,48,0.18);
            --gold-hover:  rgba(201,160,48,0.38);
            --card-bg:     #f8f8f4;
            --card-border: #e0e0d5;
            --white:       #ffffff;
            --text-dark:   #1f3a2c;
            --text-mid:    #4a6358;
        }

        html { scroll-behavior: smooth; }

        body {
            font-family: 'Cairo', sans-serif;
            background: #eeeee8;
            color: var(--text-dark);
            direction: rtl;
            min-height: 100vh;
        }

        /* â•â• HEADER â•â• */
        header {
            background: linear-gradient(135deg, #1a2f24 0%, #2d5440 55%, #1f3a2c 100%);
            color: white;
            position: relative;
            overflow: hidden;
            box-shadow: 0 6px 28px rgba(0,0,0,0.28);
        }
        header::before {
            content: '';
            position: absolute;
            top: -70px; left: -70px;
            width: 240px; height: 240px;
            border-radius: 50%;
            background: rgba(201,160,48,0.07);
            pointer-events: none;
        }
        header::after {
            content: '';
            position: absolute;
            bottom: -50px; right: -50px;
            width: 180px; height: 180px;
            border-radius: 50%;
            background: rgba(201,160,48,0.05);
            pointer-events: none;
        }
        .header-inner {
            max-width: 1700px;
            margin: 0 auto;
            padding: 1.8rem 2rem;
            display: flex;
            align-items: center;
            gap: 1.5rem;
            position: relative;
            z-index: 1;
        }
        .header-icon {
            width: 68px; height: 68px;
            background: rgba(201,160,48,0.13);
            border: 2px solid rgba(201,160,48,0.45);
            border-radius: 50%;
            display: flex; align-items: center; justify-content: center;
            flex-shrink: 0;
        }
        .header-icon svg { width: 36px; height: 36px; }
        .header-text { flex: 1; }
        .header-text h1 {
            font-size: clamp(1.2rem, 2.3vw, 1.9rem);
            font-weight: 800;
            color: var(--gold);
            line-height: 1.4;
            margin-bottom: 0.35rem;
            text-shadow: 0 2px 8px rgba(0,0,0,0.22);
        }
        .header-text p {
            font-size: clamp(0.82rem, 1.4vw, 0.98rem);
            color: rgba(255,255,255,0.82);
        }
        .header-divider {
            width: 100%;
            height: 3px;
            background: linear-gradient(90deg, transparent, var(--gold), transparent);
        }

        /* â•â• PAGE WRAPPER â•â• */
        .page-wrapper {
            max-width: 1750px;
            margin: 0 auto;
            padding: 1.4rem 1rem 3rem;
        }

        /* â•â• 3-COLUMN GRID â•â• */
        .main-grid {
            display: grid;
            grid-template-columns: 1fr 1.35fr 1fr;
            gap: 1.1rem;
            align-items: start;
            opacity: 0;
            animation: fadeInUp 0.75s ease forwards;
            animation-delay: 0.2s;
        }
        @keyframes fadeInUp {
            from { opacity: 0; transform: translateY(22px); }
            to   { opacity: 1; transform: translateY(0); }
        }
        .col-right { display: flex; flex-direction: column; gap: 0.85rem; }
        .col-left  { display: flex; flex-direction: column; gap: 0.85rem; }

        /* â•â• REGION CARDS â•â• */
        .region-card {
            background: var(--card-bg);
            border: 1.5px solid var(--card-border);
            border-radius: 14px;
            padding: 0.85rem 0.95rem;
            box-shadow: 0 2px 8px rgba(31,58,44,0.07);
            transition: border-color 0.22s ease, box-shadow 0.22s ease, transform 0.22s ease;
            cursor: pointer;
            position: relative;
            overflow: hidden;
        }
        .region-card::before {
            content: '';
            position: absolute;
            top: 0; right: 0;
            width: 4px; height: 100%;
            background: var(--gold);
            opacity: 0;
            transition: opacity 0.22s ease;
            border-radius: 0 14px 14px 0;
        }
        .region-card:hover,
        .region-card.highlighted {
            border-color: var(--gold);
            box-shadow: 0 6px 22px rgba(201,160,48,0.25);
            transform: scale(1.03);
        }
        .region-card:hover::before,
        .region-card.highlighted::before { opacity: 1; }

        .card-inner {
            display: flex;
            align-items: center;
            gap: 0.8rem;
        }
        .logo-wrap {
            width: 62px; height: 62px; min-width: 62px;
            background: white;
            border: 1.5px solid var(--card-border);
            border-radius: 10px;
            display: flex; align-items: center; justify-content: center;
            overflow: hidden;
            padding: 4px;
            transition: border-color 0.22s ease;
        }
        .region-card:hover .logo-wrap,
        .region-card.highlighted .logo-wrap { border-color: var(--gold); }
        .logo-wrap img { width: 100%; height: 100%; object-fit: contain; }

        .card-text { flex: 1; min-width: 0; }
        .card-name {
            font-size: 0.8rem;
            font-weight: 700;
            color: var(--text-dark);
            line-height: 1.45;
            margin-bottom: 0.42rem;
        }
        .card-badge {
            display: inline-flex;
            align-items: center;
            gap: 0.32rem;
            background: var(--green-dark);
            color: white;
            padding: 0.2rem 0.6rem 0.2rem 0.28rem;
            border-radius: 20px;
            font-size: 0.73rem;
            font-weight: 600;
            white-space: nowrap;
        }
        .badge-num {
            background: var(--gold);
            color: white;
            width: 20px; height: 20px;
            border-radius: 50%;
            display: flex; align-items: center; justify-content: center;
            font-size: 0.7rem; font-weight: 800;
            flex-shrink: 0;
            position: relative;
        }
        .badge-num::after {
            content: '';
            position: absolute;
            width: 5px; height: 5px;
            background: white;
            border-radius: 50%;
            opacity: 0.32;
        }

        /* â•â• MAP PANEL â•â• */
        .map-panel {
            background: white;
            border: 2px solid var(--gold);
            border-radius: 18px;
            overflow: hidden;
            box-shadow: 0 8px 34px rgba(31,58,44,0.14);
            position: sticky;
            top: 1rem;
            opacity: 0;
            animation: fadeInUp 0.75s ease forwards;
            animation-delay: 0.4s;
        }
        .map-panel-header {
            background: linear-gradient(135deg, var(--green-dark), var(--green-mid));
            padding: 0.85rem 1.2rem;
            display: flex;
            align-items: center;
            gap: 0.7rem;
        }
        .map-panel-header h2 {
            color: var(--gold);
            font-size: 0.97rem;
            font-weight: 700;
            flex: 1;
            text-align: center;
        }
        .map-dot-legend {
            display: flex; align-items: center; gap: 0.38rem;
            font-size: 0.7rem;
            color: rgba(255,255,255,0.72);
        }
        .legend-dot {
            width: 10px; height: 10px;
            border-radius: 50%;
            background: var(--gold);
        }

        #map {
            width: 100%;
            height: 690px;
            background: var(--gold-pale);
        }
        .leaflet-container {
            background: var(--gold-pale) !important;
            font-family: 'Cairo', sans-serif;
        }

        /* â•â• REGION LABELS on MAP â•â• */
        .region-label-icon {
            background: transparent !important;
            border: none !important;
        }
        .region-num-dot {
            background: var(--gold, #c9a030);
            border: 2.5px solid white;
            border-radius: 50%;
            width: 28px; height: 28px;
            display: flex; align-items: center; justify-content: center;
            color: white;
            font-weight: 800;
            font-size: 0.74rem;
            font-family: 'Cairo', sans-serif;
            box-shadow: 0 2px 8px rgba(0,0,0,0.28);
            cursor: pointer;
            transition: transform 0.2s ease, box-shadow 0.2s ease, background 0.2s ease;
        }
        .region-num-dot:hover,
        .region-num-dot.dot-highlighted {
            transform: scale(1.45);
            box-shadow: 0 5px 16px rgba(201,160,48,0.65);
            background: #e0b84a;
            z-index: 999 !important;
        }

        /* â•â• LEAFLET POPUP â•â• */
        .leaflet-popup-content-wrapper {
            border-radius: 12px !important;
            border: 2px solid var(--gold, #c9a030) !important;
            box-shadow: 0 8px 26px rgba(0,0,0,0.18) !important;
            padding: 0 !important;
            overflow: hidden;
        }
        .leaflet-popup-content { margin: 0 !important; width: auto !important; }
        .leaflet-popup-tip { background: var(--gold, #c9a030) !important; }
        .popup-inner {
            background: white;
            padding: 1rem 1.2rem;
            text-align: center;
            direction: rtl;
            min-width: 210px;
        }
        .popup-num {
            display: inline-flex;
            align-items: center; justify-content: center;
            width: 30px; height: 30px;
            background: var(--gold, #c9a030);
            color: white; border-radius: 50%;
            font-weight: 800; font-size: 0.88rem;
            margin-bottom: 0.45rem;
        }
        .popup-region { font-size: 0.7rem; color: var(--text-mid, #4a6358); font-weight: 600; margin-bottom: 0.25rem; }
        .popup-club   { font-size: 0.8rem; color: var(--text-dark, #1f3a2c); font-weight: 700; line-height: 1.4; }
        .popup-logo   { width: 58px; height: 58px; object-fit: contain; margin: 0.55rem auto 0; display: block; }

        /* â•â• ARROWS SVG â•â• */
        #arrows-svg {
            position: fixed;
            top: 0; left: 0;
            width: 100%; height: 100%;
            pointer-events: none;
            z-index: 500;
        }
        .arrow-path {
            fill: none;
            stroke: var(--gold, #c9a030);
            stroke-width: 1.5;
            stroke-dasharray: 5 4;
            opacity: 0;
            transition: opacity 0.28s ease;
        }
        .arrow-path.active { opacity: 0.72; }

        /* â•â• MODAL â•â• */
        .modal-overlay {
            display: none;
            position: fixed; inset: 0;
            background: rgba(10,25,18,0.72);
            z-index: 3000;
            align-items: center; justify-content: center;
            backdrop-filter: blur(5px);
        }
        .modal-overlay.open { display: flex; }
        .modal-box {
            background: white;
            border-radius: 20px;
            padding: 2rem;
            max-width: 460px; width: 92%;
            position: relative;
            text-align: center; direction: rtl;
            animation: boxIn 0.3s ease;
            box-shadow: 0 18px 64px rgba(0,0,0,0.32);
            border: 2px solid var(--gold);
        }
        @keyframes boxIn {
            from { transform: translateY(28px) scale(0.95); opacity: 0; }
            to   { transform: translateY(0) scale(1); opacity: 1; }
        }
        .modal-close {
            position: absolute; top: 1rem; left: 1rem;
            width: 32px; height: 32px;
            background: var(--card-bg); border: 1.5px solid var(--card-border);
            border-radius: 50%;
            display: flex; align-items: center; justify-content: center;
            cursor: pointer; font-size: 1rem; color: var(--text-dark);
            transition: all 0.2s ease; line-height: 1;
        }
        .modal-close:hover { background: var(--gold); color: white; border-color: var(--gold); transform: rotate(90deg); }
        .modal-badge {
            display: inline-flex; align-items: center; gap: 0.5rem;
            background: var(--green-dark); color: white;
            padding: 0.28rem 1rem 0.28rem 0.38rem;
            border-radius: 20px; font-size: 0.78rem; font-weight: 600;
            margin-bottom: 0.75rem;
        }
        .modal-badge-num {
            background: var(--gold); width: 24px; height: 24px;
            border-radius: 50%;
            display: flex; align-items: center; justify-content: center;
            font-weight: 800; font-size: 0.78rem;
        }
        .modal-title {
            font-size: 1.05rem; font-weight: 800;
            color: var(--text-dark); line-height: 1.5;
            margin-bottom: 1.1rem;
        }
        .modal-logo-frame {
            background: var(--card-bg);
            border: 2px solid var(--gold);
            border-radius: 14px;
            padding: 1.4rem;
            margin-bottom: 1.1rem;
            min-height: 190px;
            display: flex; align-items: center; justify-content: center;
        }
        .modal-logo-frame img { max-width: 100%; max-height: 190px; object-fit: contain; }
        .modal-btn {
            background: var(--green-dark); color: white;
            border: none; padding: 0.65rem 2rem;
            border-radius: 10px; font-family: 'Cairo', sans-serif;
            font-size: 0.88rem; font-weight: 700; cursor: pointer;
            transition: all 0.2s ease;
        }
        .modal-btn:hover { background: var(--gold); transform: scale(1.04); }

        /* â•â• FOOTER â•â• */
        footer {
            background: var(--green-dark);
            color: rgba(255,255,255,0.68);
            text-align: center;
            padding: 1.2rem 1rem;
            font-size: 0.83rem;
            margin-top: 1rem;
        }
        footer span { color: var(--gold); font-weight: 700; }

        /* â•â• RESPONSIVE â•â• */
        @media (max-width: 1100px) {
            .main-grid { grid-template-columns: 1fr; }
            .col-left  { order: 3; }
            .col-right { order: 2; }
            .map-panel { order: 1; position: static; }
            #map { height: 420px; }
            #arrows-svg { display: none; }
        }
        @media (max-width: 600px) {
            .header-inner { padding: 1.2rem 1rem; gap: 1rem; }
            .header-icon  { width: 50px; height: 50px; }
            #map { height: 310px; }
        }
    </style>
</head>
<body>

<!-- HEADER -->
<header>
    <div class="header-inner">
        <div class="header-icon">
            <svg viewBox="0 0 64 64" fill="none" xmlns="http://www.w3.org/2000/svg">
                <circle cx="32" cy="32" r="27" stroke="#c9a030" stroke-width="2.5"/>
                <path d="M32 13 L36 24 L48 24 L38.5 31.5 L42 44 L32 36.5 L22 44 L25.5 31.5 L16 24 L28 24 Z"
                      fill="none" stroke="#c9a030" stroke-width="2" stroke-linejoin="round"/>
                <circle cx="32" cy="32" r="3.5" fill="#c9a030" opacity="0.55"/>
            </svg>
        </div>
        <div class="header-text">
            <h1>ÙˆØ±Ù‚Ø© ØªØ¹Ø±ÙŠÙÙŠØ© Ø¨Ø£Ù†Ø¯ÙŠØ© "Ø¬Ø§Ø¦Ø²Ø© Ø£Ø³ØªØ§Ø°(Ø©) Ø§Ù„Ø³Ù†Ø©" Ø­Ø³Ø¨ Ø§Ù„Ø¬Ù‡Ø§Øª</h1>
            <p>Ø§Ù„ØªÙˆØ²ÙŠØ¹ Ø§Ù„Ø¬Ù‡ÙˆÙŠ Ø§Ù„Ø±Ø³Ù…ÙŠ Ø­Ø³Ø¨ Ø®Ø±ÙŠØ·Ø© Ø§Ù„Ù…ØºØ±Ø¨ &nbsp;|&nbsp; 12 Ø¬Ù‡Ø© &nbsp;|&nbsp; 12 Ù†Ø§Ø¯ÙŠ</p>
        </div>
    </div>
    <div class="header-divider"></div>
</header>

<!-- PAGE CONTENT -->
<div class="page-wrapper">
    <div class="main-grid">

        <!-- RIGHT COLUMN: Regions 1â€“6 -->
        <div class="col-right">
            <div class="region-card" id="b1" data-region="1">
                <div class="card-inner">
                    <div class="logo-wrap"><img src="https://i.postimg.cc/TpGqN2JY/jht-tnjt-ttwan-alhsymt.png" alt="Ø·Ù†Ø¬Ø© ØªØ·ÙˆØ§Ù† Ø§Ù„Ø­Ø³ÙŠÙ…Ø©" loading="lazy"></div>
                    <div class="card-text">
                        <div class="card-name">Ù†Ø§Ø¯ÙŠ Ø¬Ø§Ø¦Ø²Ø© Ø£Ø³ØªØ§Ø°(Ø©) Ø§Ù„Ø³Ù†Ø© â€“ Ø¬Ù‡Ø© Ø·Ù†Ø¬Ø©â€“ØªØ·ÙˆØ§Ù†â€“Ø§Ù„Ø­Ø³ÙŠÙ…Ø©</div>
                        <div class="card-badge"><span class="badge-num">1</span><span>Ø§Ù„Ø¬Ù‡Ø© Ø§Ù„Ø£ÙˆÙ„Ù‰</span></div>
                    </div>
                </div>
            </div>
            <div class="region-card" id="b2" data-region="2">
                <div class="card-inner">
                    <div class="logo-wrap"><img src="https://i.postimg.cc/2VmF9j7V/jht-alshrq.png" alt="Ø§Ù„Ø´Ø±Ù‚" loading="lazy"></div>
                    <div class="card-text">
                        <div class="card-name">Ù†Ø§Ø¯ÙŠ Ø¬Ø§Ø¦Ø²Ø© Ø£Ø³ØªØ§Ø°(Ø©) Ø§Ù„Ø³Ù†Ø© â€“ Ø¬Ù‡Ø© Ø§Ù„Ø´Ø±Ù‚</div>
                        <div class="card-badge"><span class="badge-num">2</span><span>Ø§Ù„Ø¬Ù‡Ø© Ø§Ù„Ø«Ø§Ù†ÙŠØ©</span></div>
                    </div>
                </div>
            </div>
            <div class="region-card" id="b3" data-region="3">
                <div class="card-inner">
                    <div class="logo-wrap"><img src="https://i.postimg.cc/hfgbZ41J/jht-fas-mknas.png" alt="ÙØ§Ø³ Ù…ÙƒÙ†Ø§Ø³" loading="lazy"></div>
                    <div class="card-text">
                        <div class="card-name">Ù†Ø§Ø¯ÙŠ Ø¬Ø§Ø¦Ø²Ø© Ø£Ø³ØªØ§Ø°(Ø©) Ø§Ù„Ø³Ù†Ø© â€“ Ø¬Ù‡Ø© ÙØ§Ø³â€“Ù…ÙƒÙ†Ø§Ø³</div>
                        <div class="card-badge"><span class="badge-num">3</span><span>Ø§Ù„Ø¬Ù‡Ø© Ø§Ù„Ø«Ø§Ù„Ø«Ø©</span></div>
                    </div>
                </div>
            </div>
            <div class="region-card" id="b4" data-region="4">
                <div class="card-inner">
                    <div class="logo-wrap"><img src="https://i.postimg.cc/jLKQ3q4D/jht-alrbat-sla-alqnytrt.png" alt="Ø§Ù„Ø±Ø¨Ø§Ø· Ø³Ù„Ø§ Ø§Ù„Ù‚Ù†ÙŠØ·Ø±Ø©" loading="lazy"></div>
                    <div class="card-text">
                        <div class="card-name">Ù†Ø§Ø¯ÙŠ Ø¬Ø§Ø¦Ø²Ø© Ø£Ø³ØªØ§Ø°(Ø©) Ø§Ù„Ø³Ù†Ø© â€“ Ø¬Ù‡Ø© Ø§Ù„Ø±Ø¨Ø§Ø·â€“Ø³Ù„Ø§â€“Ø§Ù„Ù‚Ù†ÙŠØ·Ø±Ø©</div>
                        <div class="card-badge"><span class="badge-num">4</span><span>Ø§Ù„Ø¬Ù‡Ø© Ø§Ù„Ø±Ø§Ø¨Ø¹Ø©</span></div>
                    </div>
                </div>
            </div>
            <div class="region-card" id="b5" data-region="5">
                <div class="card-inner">
                    <div class="logo-wrap"><img src="https://i.postimg.cc/gndqtcHX/jht-bny-mlal-khnyfrt.png" alt="Ø¨Ù†ÙŠ Ù…Ù„Ø§Ù„ Ø®Ù†ÙŠÙØ±Ø©" loading="lazy"></div>
                    <div class="card-text">
                        <div class="card-name">Ù†Ø§Ø¯ÙŠ Ø¬Ø§Ø¦Ø²Ø© Ø£Ø³ØªØ§Ø°(Ø©) Ø§Ù„Ø³Ù†Ø© â€“ Ø¬Ù‡Ø© Ø¨Ù†ÙŠ Ù…Ù„Ø§Ù„â€“Ø®Ù†ÙŠÙØ±Ø©</div>
                        <div class="card-badge"><span class="badge-num">5</span><span>Ø§Ù„Ø¬Ù‡Ø© Ø§Ù„Ø®Ø§Ù…Ø³Ø©</span></div>
                    </div>
                </div>
            </div>
            <div class="region-card" id="b6" data-region="6">
                <div class="card-inner">
                    <div class="logo-wrap"><img src="https://i.postimg.cc/nCZYSVGq/jht-aldar-albydaÊ¾-stat.png" alt="Ø§Ù„Ø¯Ø§Ø± Ø§Ù„Ø¨ÙŠØ¶Ø§Ø¡ Ø³Ø·Ø§Øª" loading="lazy"></div>
                    <div class="card-text">
                        <div class="card-name">Ù†Ø§Ø¯ÙŠ Ø¬Ø§Ø¦Ø²Ø© Ø£Ø³ØªØ§Ø°(Ø©) Ø§Ù„Ø³Ù†Ø© â€“ Ø¬Ù‡Ø© Ø§Ù„Ø¯Ø§Ø± Ø§Ù„Ø¨ÙŠØ¶Ø§Ø¡â€“Ø³Ø·Ø§Øª</div>
                        <div class="card-badge"><span class="badge-num">6</span><span>Ø§Ù„Ø¬Ù‡Ø© Ø§Ù„Ø³Ø§Ø¯Ø³Ø©</span></div>
                    </div>
                </div>
            </div>
        </div>

        <!-- CENTER COLUMN: Map -->
        <div class="map-panel">
            <div class="map-panel-header">
                <h2>ğŸ—ºï¸ Ø®Ø±ÙŠØ·Ø© ØªÙˆØ²ÙŠØ¹ Ø£Ù†Ø¯ÙŠØ© Ø§Ù„Ø¬Ø§Ø¦Ø²Ø©</h2>
                <div class="map-dot-legend">
                    <div class="legend-dot"></div>
                    <span>Ù…ÙˆÙ‚Ø¹ Ø§Ù„Ø¬Ù‡Ø©</span>
                </div>
            </div>
            <div id="map"></div>
        </div>

        <!-- LEFT COLUMN: Regions 7â€“12 -->
        <div class="col-left">
            <div class="region-card" id="b7" data-region="7">
                <div class="card-inner">
                    <div class="logo-wrap"><img src="https://i.postimg.cc/Xp3c1Nkc/jht-mraksh-asfy.png" alt="Ù…Ø±Ø§ÙƒØ´ Ø¢Ø³ÙÙŠ" loading="lazy"></div>
                    <div class="card-text">
                        <div class="card-name">Ù†Ø§Ø¯ÙŠ Ø¬Ø§Ø¦Ø²Ø© Ø£Ø³ØªØ§Ø°(Ø©) Ø§Ù„Ø³Ù†Ø© â€“ Ø¬Ù‡Ø© Ù…Ø±Ø§ÙƒØ´â€“Ø¢Ø³ÙÙŠ</div>
                        <div class="card-badge"><span class="badge-num">7</span><span>Ø§Ù„Ø¬Ù‡Ø© Ø§Ù„Ø³Ø§Ø¨Ø¹Ø©</span></div>
                    </div>
                </div>
            </div>
            <div class="region-card" id="b8" data-region="8">
                <div class="card-inner">
                    <div class="logo-wrap"><img src="https://i.postimg.cc/Whj6Ypwm/jht-sws-mast.png" alt="Ø³ÙˆØ³ Ù…Ø§Ø³Ø©" loading="lazy"></div>
                    <div class="card-text">
                        <div class="card-name">Ù†Ø§Ø¯ÙŠ Ø¬Ø§Ø¦Ø²Ø© Ø£Ø³ØªØ§Ø°(Ø©) Ø§Ù„Ø³Ù†Ø© â€“ Ø¬Ù‡Ø© Ø³ÙˆØ³â€“Ù…Ø§Ø³Ø©</div>
                        <div class="card-badge"><span class="badge-num">8</span><span>Ø§Ù„Ø¬Ù‡Ø© Ø§Ù„Ø«Ø§Ù…Ù†Ø©</span></div>
                    </div>
                </div>
            </div>
            <div class="region-card" id="b9" data-region="9">
                <div class="card-inner">
                    <div class="logo-wrap"><img src="https://i.postimg.cc/QHskYNJm/jht-drÊ¿t-tafylalt.png" alt="Ø¯Ø±Ø¹Ø© ØªØ§ÙÙŠÙ„Ø§Ù„Øª" loading="lazy"></div>
                    <div class="card-text">
                        <div class="card-name">Ù†Ø§Ø¯ÙŠ Ø¬Ø§Ø¦Ø²Ø© Ø£Ø³ØªØ§Ø°(Ø©) Ø§Ù„Ø³Ù†Ø© â€“ Ø¬Ù‡Ø© Ø¯Ø±Ø¹Ø©â€“ØªØ§ÙÙŠÙ„Ø§Ù„Øª</div>
                        <div class="card-badge"><span class="badge-num">9</span><span>Ø§Ù„Ø¬Ù‡Ø© Ø§Ù„ØªØ§Ø³Ø¹Ø©</span></div>
                    </div>
                </div>
            </div>
            <div class="region-card" id="b10" data-region="10">
                <div class="card-inner">
                    <div class="logo-wrap"><img src="https://i.postimg.cc/1fH0kxvH/jht-klmym-wad-nwn.png" alt="ÙƒÙ„Ù…ÙŠÙ… ÙˆØ§Ø¯ Ù†ÙˆÙ†" loading="lazy"></div>
                    <div class="card-text">
                        <div class="card-name">Ù†Ø§Ø¯ÙŠ Ø¬Ø§Ø¦Ø²Ø© Ø£Ø³ØªØ§Ø°(Ø©) Ø§Ù„Ø³Ù†Ø© â€“ Ø¬Ù‡Ø© ÙƒÙ„Ù…ÙŠÙ…â€“ÙˆØ§Ø¯ Ù†ÙˆÙ†</div>
                        <div class="card-badge"><span class="badge-num">10</span><span>Ø§Ù„Ø¬Ù‡Ø© Ø§Ù„Ø¹Ø§Ø´Ø±Ø©</span></div>
                    </div>
                </div>
            </div>
            <div class="region-card" id="b11" data-region="11">
                <div class="card-inner">
                    <div class="logo-wrap"><img src="https://i.postimg.cc/RN9QpCLs/jht-alÊ¿ywn-alsaqyt-alhmraÊ¾.png" alt="Ø§Ù„Ø¹ÙŠÙˆÙ† Ø§Ù„Ø³Ø§Ù‚ÙŠØ© Ø§Ù„Ø­Ù…Ø±Ø§Ø¡" loading="lazy"></div>
                    <div class="card-text">
                        <div class="card-name">Ù†Ø§Ø¯ÙŠ Ø¬Ø§Ø¦Ø²Ø© Ø£Ø³ØªØ§Ø°(Ø©) Ø§Ù„Ø³Ù†Ø© â€“ Ø¬Ù‡Ø© Ø§Ù„Ø¹ÙŠÙˆÙ†â€“Ø§Ù„Ø³Ø§Ù‚ÙŠØ© Ø§Ù„Ø­Ù…Ø±Ø§Ø¡</div>
                        <div class="card-badge"><span class="badge-num">11</span><span>Ø§Ù„Ø¬Ù‡Ø© Ø§Ù„Ø­Ø§Ø¯ÙŠØ© Ø¹Ø´Ø±Ø©</span></div>
                    </div>
                </div>
            </div>
            <div class="region-card" id="b12" data-region="12">
                <div class="card-inner">
                    <div class="logo-wrap"><img src="https://i.postimg.cc/tYytvRNr/jht-aldakhlt-wad-aldhhb.png" alt="Ø§Ù„Ø¯Ø§Ø®Ù„Ø© ÙˆØ§Ø¯ÙŠ Ø§Ù„Ø°Ù‡Ø¨" loading="lazy"></div>
                    <div class="card-text">
                        <div class="card-name">Ù†Ø§Ø¯ÙŠ Ø¬Ø§Ø¦Ø²Ø© Ø£Ø³ØªØ§Ø°(Ø©) Ø§Ù„Ø³Ù†Ø© â€“ Ø¬Ù‡Ø© Ø§Ù„Ø¯Ø§Ø®Ù„Ø©â€“ÙˆØ§Ø¯ÙŠ Ø§Ù„Ø°Ù‡Ø¨</div>
                        <div class="card-badge"><span class="badge-num">12</span><span>Ø§Ù„Ø¬Ù‡Ø© Ø§Ù„Ø«Ø§Ù†ÙŠØ© Ø¹Ø´Ø±Ø©</span></div>
                    </div>
                </div>
            </div>
        </div>

    </div><!-- /.main-grid -->
</div><!-- /.page-wrapper -->

<!-- SVG Arrow Overlay -->
<svg id="arrows-svg" aria-hidden="true">
    <defs>
        <marker id="arrowhead" markerWidth="7" markerHeight="7" refX="5" refY="3" orient="auto">
            <path d="M0,0 L0,6 L7,3 z" fill="#c9a030" opacity="0.88"/>
        </marker>
    </defs>
</svg>

<!-- Modal -->
<div class="modal-overlay" id="modal">
    <div class="modal-box">
        <button class="modal-close" id="modalClose" title="Ø¥ØºÙ„Ø§Ù‚">âœ•</button>
        <div class="modal-badge">
            <span class="modal-badge-num" id="modalNum">1</span>
            <span id="modalRegionLabel">Ø§Ù„Ø¬Ù‡Ø© Ø§Ù„Ø£ÙˆÙ„Ù‰</span>
        </div>
        <div class="modal-title" id="modalTitle">Ø§Ø³Ù… Ø§Ù„Ù†Ø§Ø¯ÙŠ</div>
        <div class="modal-logo-frame">
            <img id="modalImg" src="" alt="Ø´Ø¹Ø§Ø± Ø§Ù„Ø¬Ù‡Ø©">
        </div>
        <button class="modal-btn" id="modalCloseBtn">Ø¥ØºÙ„Ø§Ù‚</button>
    </div>
</div>

<footer>
    <p>Â© 2025 &nbsp;â€”&nbsp; <span>Ø¬Ø§Ø¦Ø²Ø© Ø£Ø³ØªØ§Ø°(Ø©) Ø§Ù„Ø³Ù†Ø©</span> &nbsp;â€”&nbsp; Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø­Ù‚ÙˆÙ‚ Ù…Ø­ÙÙˆØ¸Ø©</p>
</footer>

<script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
<script>
/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   MAPPING: GeoJSON id â†’ region number & full data
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
const ID_TO_NUM = {
    "MA01": 1,  "MA02": 2,  "MA03": 3,  "MA04": 4,
    "MA05": 5,  "MA06": 6,  "MA07": 7,  "MA09": 8,
    "MA08": 9,  "MA10": 10, "MA11": 11, "MA12": 12
};

const REGIONS = {
    1:  { name:"Ù†Ø§Ø¯ÙŠ Ø¬Ø§Ø¦Ø²Ø© Ø£Ø³ØªØ§Ø°(Ø©) Ø§Ù„Ø³Ù†Ø© â€“ Ø¬Ù‡Ø© Ø·Ù†Ø¬Ø©â€“ØªØ·ÙˆØ§Ù†â€“Ø§Ù„Ø­Ø³ÙŠÙ…Ø©",    label:"Ø§Ù„Ø¬Ù‡Ø© Ø§Ù„Ø£ÙˆÙ„Ù‰",          logo:"https://i.postimg.cc/TpGqN2JY/jht-tnjt-ttwan-alhsymt.png"     },
    2:  { name:"Ù†Ø§Ø¯ÙŠ Ø¬Ø§Ø¦Ø²Ø© Ø£Ø³ØªØ§Ø°(Ø©) Ø§Ù„Ø³Ù†Ø© â€“ Ø¬Ù‡Ø© Ø§Ù„Ø´Ø±Ù‚",                   label:"Ø§Ù„Ø¬Ù‡Ø© Ø§Ù„Ø«Ø§Ù†ÙŠØ©",          logo:"https://i.postimg.cc/2VmF9j7V/jht-alshrq.png"                  },
    3:  { name:"Ù†Ø§Ø¯ÙŠ Ø¬Ø§Ø¦Ø²Ø© Ø£Ø³ØªØ§Ø°(Ø©) Ø§Ù„Ø³Ù†Ø© â€“ Ø¬Ù‡Ø© ÙØ§Ø³â€“Ù…ÙƒÙ†Ø§Ø³",              label:"Ø§Ù„Ø¬Ù‡Ø© Ø§Ù„Ø«Ø§Ù„Ø«Ø©",          logo:"https://i.postimg.cc/hfgbZ41J/jht-fas-mknas.png"               },
    4:  { name:"Ù†Ø§Ø¯ÙŠ Ø¬Ø§Ø¦Ø²Ø© Ø£Ø³ØªØ§Ø°(Ø©) Ø§Ù„Ø³Ù†Ø© â€“ Ø¬Ù‡Ø© Ø§Ù„Ø±Ø¨Ø§Ø·â€“Ø³Ù„Ø§â€“Ø§Ù„Ù‚Ù†ÙŠØ·Ø±Ø©",   label:"Ø§Ù„Ø¬Ù‡Ø© Ø§Ù„Ø±Ø§Ø¨Ø¹Ø©",          logo:"https://i.postimg.cc/jLKQ3q4D/jht-alrbat-sla-alqnytrt.png"    },
    5:  { name:"Ù†Ø§Ø¯ÙŠ Ø¬Ø§Ø¦Ø²Ø© Ø£Ø³ØªØ§Ø°(Ø©) Ø§Ù„Ø³Ù†Ø© â€“ Ø¬Ù‡Ø© Ø¨Ù†ÙŠ Ù…Ù„Ø§Ù„â€“Ø®Ù†ÙŠÙØ±Ø©",       label:"Ø§Ù„Ø¬Ù‡Ø© Ø§Ù„Ø®Ø§Ù…Ø³Ø©",          logo:"https://i.postimg.cc/gndqtcHX/jht-bny-mlal-khnyfrt.png"       },
    6:  { name:"Ù†Ø§Ø¯ÙŠ Ø¬Ø§Ø¦Ø²Ø© Ø£Ø³ØªØ§Ø°(Ø©) Ø§Ù„Ø³Ù†Ø© â€“ Ø¬Ù‡Ø© Ø§Ù„Ø¯Ø§Ø± Ø§Ù„Ø¨ÙŠØ¶Ø§Ø¡â€“Ø³Ø·Ø§Øª",    label:"Ø§Ù„Ø¬Ù‡Ø© Ø§Ù„Ø³Ø§Ø¯Ø³Ø©",          logo:"https://i.postimg.cc/nCZYSVGq/jht-aldar-albydaÊ¾-stat.png"     },
    7:  { name:"Ù†Ø§Ø¯ÙŠ Ø¬Ø§Ø¦Ø²Ø© Ø£Ø³ØªØ§Ø°(Ø©) Ø§Ù„Ø³Ù†Ø© â€“ Ø¬Ù‡Ø© Ù…Ø±Ø§ÙƒØ´â€“Ø¢Ø³ÙÙŠ",            label:"Ø§Ù„Ø¬Ù‡Ø© Ø§Ù„Ø³Ø§Ø¨Ø¹Ø©",          logo:"https://i.postimg.cc/Xp3c1Nkc/jht-mraksh-asfy.png"            },
    8:  { name:"Ù†Ø§Ø¯ÙŠ Ø¬Ø§Ø¦Ø²Ø© Ø£Ø³ØªØ§Ø°(Ø©) Ø§Ù„Ø³Ù†Ø© â€“ Ø¬Ù‡Ø© Ø³ÙˆØ³â€“Ù…Ø§Ø³Ø©",              label:"Ø§Ù„Ø¬Ù‡Ø© Ø§Ù„Ø«Ø§Ù…Ù†Ø©",          logo:"https://i.postimg.cc/Whj6Ypwm/jht-sws-mast.png"               },
    9:  { name:"Ù†Ø§Ø¯ÙŠ Ø¬Ø§Ø¦Ø²Ø© Ø£Ø³ØªØ§Ø°(Ø©) Ø§Ù„Ø³Ù†Ø© â€“ Ø¬Ù‡Ø© Ø¯Ø±Ø¹Ø©â€“ØªØ§ÙÙŠÙ„Ø§Ù„Øª",         label:"Ø§Ù„Ø¬Ù‡Ø© Ø§Ù„ØªØ§Ø³Ø¹Ø©",          logo:"https://i.postimg.cc/QHskYNJm/jht-drÊ¿t-tafylalt.png"          },
    10: { name:"Ù†Ø§Ø¯ÙŠ Ø¬Ø§Ø¦Ø²Ø© Ø£Ø³ØªØ§Ø°(Ø©) Ø§Ù„Ø³Ù†Ø© â€“ Ø¬Ù‡Ø© ÙƒÙ„Ù…ÙŠÙ…â€“ÙˆØ§Ø¯ Ù†ÙˆÙ†",         label:"Ø§Ù„Ø¬Ù‡Ø© Ø§Ù„Ø¹Ø§Ø´Ø±Ø©",          logo:"https://i.postimg.cc/1fH0kxvH/jht-klmym-wad-nwn.png"          },
    11: { name:"Ù†Ø§Ø¯ÙŠ Ø¬Ø§Ø¦Ø²Ø© Ø£Ø³ØªØ§Ø°(Ø©) Ø§Ù„Ø³Ù†Ø© â€“ Ø¬Ù‡Ø© Ø§Ù„Ø¹ÙŠÙˆÙ†â€“Ø§Ù„Ø³Ø§Ù‚ÙŠØ© Ø§Ù„Ø­Ù…Ø±Ø§Ø¡",label:"Ø§Ù„Ø¬Ù‡Ø© Ø§Ù„Ø­Ø§Ø¯ÙŠØ© Ø¹Ø´Ø±Ø©",     logo:"https://i.postimg.cc/RN9QpCLs/jht-alÊ¿ywn-alsaqyt-alhmraÊ¾.png" },
    12: { name:"Ù†Ø§Ø¯ÙŠ Ø¬Ø§Ø¦Ø²Ø© Ø£Ø³ØªØ§Ø°(Ø©) Ø§Ù„Ø³Ù†Ø© â€“ Ø¬Ù‡Ø© Ø§Ù„Ø¯Ø§Ø®Ù„Ø©â€“ÙˆØ§Ø¯ÙŠ Ø§Ù„Ø°Ù‡Ø¨",    label:"Ø§Ù„Ø¬Ù‡Ø© Ø§Ù„Ø«Ø§Ù†ÙŠØ© Ø¹Ø´Ø±Ø©",     logo:"https://i.postimg.cc/tYytvRNr/jht-aldakhlt-wad-aldhhb.png"    }
};

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   MAP INIT
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
const map = L.map('map', {
    center: [29.5, -7.5],
    zoom: 5,
    zoomControl: true,
    scrollWheelZoom: false,
    attributionControl: false
});

/* Style helpers */
const STYLE_NORMAL = {
    fillColor:   '#fdf8ec',
    fillOpacity: 0.82,
    color:       '#c9a030',
    weight:      1.8,
    opacity:     1
};
const STYLE_HOVER = {
    fillColor:   '#c9a030',
    fillOpacity: 0.38,
    color:       '#c9a030',
    weight:      3,
    opacity:     1
};

/* Store layer + marker references keyed by region_num */
const regionLayers = {};   // num â†’ Leaflet layer
const dotMarkers   = {};   // num â†’ Leaflet marker

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   HIGHLIGHT HELPERS
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
function highlightRegion(num, on) {
    const layer = regionLayers[num];
    if (!layer) return;
    try {
        layer.setStyle(on ? STYLE_HOVER : STYLE_NORMAL);
        if (on) layer.bringToFront();
    } catch(e) {}
}

function highlightDot(num, on) {
    const marker = dotMarkers[num];
    if (!marker) return;
    const el  = marker.getElement();
    if (!el)  return;
    const dot = el.querySelector('.region-num-dot');
    if (!dot) return;
    dot.classList.toggle('dot-highlighted', on);
}

function highlightCard(num, on) {
    const card = document.getElementById(`b${num}`);
    if (!card) return;
    card.classList.toggle('highlighted', on);
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   COMPUTE POLYGON CENTROID (for dot placement)
   Ù†Ø³ØªØ®Ø¯Ù… getBounds().getCenter() Ù…Ù† Leaflet Ù„Ø£Ù†Ù‡Ø§ Ø£Ø¯Ù‚
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
function getCentroid(feature) {
    try {
        /* Ø§Ù„Ø·Ø±ÙŠÙ‚Ø© Ø§Ù„Ø£Ø¯Ù‚: Ù†Ø¨Ù†ÙŠ layer Ù…Ø¤Ù‚Øª ÙˆÙ†Ø£Ø®Ø° Ù…Ø±ÙƒØ² Ø§Ù„Ù€ bounds */
        const tmpLayer = L.geoJSON(feature);
        const center   = tmpLayer.getBounds().getCenter();
        return [center.lat, center.lng];
    } catch(e) {
        /* Ø§Ø­ØªÙŠØ§Ø·ÙŠ: Ù…ØªÙˆØ³Ø· Ø¥Ø­Ø¯Ø§Ø«ÙŠØ§Øª Ø­Ø³Ø§Ø¨ÙŠ */
        const geom = feature.geometry;
        let coords = [];
        if (geom.type === 'Polygon') {
            coords = geom.coordinates[0];
        } else if (geom.type === 'MultiPolygon') {
            let maxLen = 0;
            geom.coordinates.forEach(poly => {
                if (poly[0].length > maxLen) { maxLen = poly[0].length; coords = poly[0]; }
            });
        }
        if (!coords.length) return [0, 0];
        let sumLng = 0, sumLat = 0;
        coords.forEach(([lng, lat]) => { sumLng += lng; sumLat += lat; });
        return [sumLat / coords.length, sumLng / coords.length];
    }
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   LOAD GEOJSON â†’ DRAW POLYGONS + DOTS
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */

function processGeoJSON(data) {
    /* 1 â”€ Draw polygons â€” one layer per feature */
    data.features.forEach(feature => {
        const gid = feature.properties.id;
        const num = ID_TO_NUM[gid];
        if (!num) return;

        const layer = L.geoJSON(feature, {
            style: () => ({ ...STYLE_NORMAL })
        });

        layer.on('mouseover', () => {
            layer.setStyle(STYLE_HOVER);
            layer.bringToFront();
            highlightCard(num, true);
            highlightDot(num, true);
            showArrow(num);
            updateArrowPositions();
        });
        layer.on('mouseout', () => {
            layer.setStyle(STYLE_NORMAL);
            highlightCard(num, false);
            highlightDot(num, false);
            hideArrow(num);
        });
        layer.on('click', () => openModal(num));

        layer.addTo(map);
        regionLayers[num] = layer;
    });

    /* 2 â”€ Place numbered dots at polygon centroids */
    data.features.forEach(feature => {
        const gid = feature.properties.id;
        const num = ID_TO_NUM[gid];
        if (!num) return;

        const center = getCentroid(feature);
        const region = REGIONS[num];

        const icon = L.divIcon({
            className: 'region-label-icon',
            html: `<div class="region-num-dot" id="dot${num}">${num}</div>`,
            iconSize:   [28, 28],
            iconAnchor: [14, 14],
            popupAnchor:[0, -18]
        });

        const marker = L.marker(center, { icon, zIndexOffset: 1000 }).addTo(map);

        const popupHtml = `
            <div class="popup-inner">
                <div class="popup-num">${num}</div>
                <div class="popup-region">${region.label}</div>
                <div class="popup-club">${region.name}</div>
                <img class="popup-logo" src="${region.logo}" alt="Ø´Ø¹Ø§Ø±">
            </div>`;
        marker.bindPopup(popupHtml, { maxWidth: 260, closeButton: true });

        marker.on('mouseover', () => {
            if (regionLayers[num]) { regionLayers[num].setStyle(STYLE_HOVER); regionLayers[num].bringToFront(); }
            highlightCard(num, true);
            highlightDot(num, true);
            showArrow(num);
            updateArrowPositions();
        });
        marker.on('mouseout', () => {
            if (regionLayers[num]) regionLayers[num].setStyle(STYLE_NORMAL);
            highlightCard(num, false);
            highlightDot(num, false);
            hideArrow(num);
        });
        marker.on('click', () => openModal(num));

        dotMarkers[num] = marker;
    });

    /* 3 â”€ Fit map to Morocco bounds */
    try {
        const allLayers = L.geoJSON(data);
        map.fitBounds(allLayers.getBounds(), { padding: [10, 10] });
    } catch(e) {}

    /* 4 â”€ Build arrows after everything is ready */
    setTimeout(buildArrows, 700);
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   GEOJSON â€” ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø®Ø±ÙŠØ·Ø© Ø§Ù„ØµØ­ÙŠØ­Ø©
   Ø§Ù„Ø£ÙˆÙ„ÙˆÙŠØ©: ma.json Ø§Ù„Ù…Ø­Ù„ÙŠ (12 Ø¬Ù‡Ø© Ø¨Ù€ properties.id ØµØ­ÙŠØ­)
   Ø§Ù„Ø§Ø­ØªÙŠØ§Ø·ÙŠ: Ù…ØµØ¯Ø± Ø®Ø§Ø±Ø¬ÙŠ Ù…Ø¹ Ø±Ø¨Ø· Ø°ÙƒÙŠ Ø¨Ø§Ù„Ø£Ø³Ù…Ø§Ø¡
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */

/* â”€â”€ Ø¯Ø§Ù„Ø© Ø±Ø¨Ø· Ø§Ø³Ù… Ø§Ù„Ø¬Ù‡Ø© Ø¨Ø±Ù‚Ù…Ù‡Ø§ â”€â”€ */
function getRegionNumber(props) {
    /* 1) Ù…Ø­Ø§ÙˆÙ„Ø© Ù…Ø¨Ø§Ø´Ø±Ø© Ø¹Ø¨Ø± id */
    if (props.id && ID_TO_NUM[props.id]) return ID_TO_NUM[props.id];

    /* 2) Ø¨Ù†Ø§Ø¡ Ù†Øµ Ù„Ù„Ù…Ù‚Ø§Ø±Ù†Ø© Ù…Ù† Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø­Ù‚ÙˆÙ„ Ø§Ù„Ù…Ø­ØªÙ…Ù„Ø© */
    const nm = (
        props.region     || props.name       || props.Nom_Region ||
        props.NOM_REGION || props.nom_region  || props.NAME_1    ||
        props.name_1     || props.shapeName   || ''
    ).toLowerCase().normalize('NFD').replace(/[\u0300-\u036f]/g, '');

    const raw = JSON.stringify(props).toLowerCase();

    if (nm.includes('tanger')  || nm.includes('tetouan') || nm.includes('hoceima'))  return 1;
    if (nm.includes('oriental'))                                                       return 2;
    if (nm.includes('fes')     || nm.includes('fez')     || nm.includes('meknes'))    return 3;
    if (nm.includes('rabat')   || nm.includes('kenitra') || nm.includes('sale'))      return 4;
    if (nm.includes('beni mel')|| nm.includes('khenifra'))                            return 5;
    if (nm.includes('casablan')|| nm.includes('settat'))                              return 6;
    if (nm.includes('marrakec')|| nm.includes('safi'))                                return 7;
    if (nm.includes('souss')   || nm.includes('massa'))                               return 8;
    if (nm.includes('draa')    || nm.includes('tafilal'))                             return 9;
    if (nm.includes('guelmim') || nm.includes('oued noun'))                           return 10;
    if (nm.includes('laayoune')|| nm.includes('sakia') || nm.includes('hamra'))       return 11;
    if (nm.includes('dakhla')  || nm.includes('dahab'))                               return 12;

    if (raw.includes('tanger'))    return 1;
    if (raw.includes('oriental'))  return 2;
    if (raw.includes('fes') || raw.includes('fez'))  return 3;
    if (raw.includes('rabat'))     return 4;
    if (raw.includes('beni'))      return 5;
    if (raw.includes('casablan'))  return 6;
    if (raw.includes('marrak'))    return 7;
    if (raw.includes('souss'))     return 8;
    if (raw.includes('draa') || raw.includes('tafilal')) return 9;
    if (raw.includes('guelmim'))   return 10;
    if (raw.includes('laayoune') || raw.includes('sakia')) return 11;
    if (raw.includes('dakhla'))    return 12;

    return null;
}

/* â”€â”€ ØªØ·Ø¨ÙŠØ¹ features: Ø¶Ù…Ø§Ù† ÙˆØ¬ÙˆØ¯ id ØµØ­ÙŠØ­ (MA0X) ÙÙŠ ÙƒÙ„ feature â”€â”€ */
function normalizeFeatures(data) {
    return {
        ...data,
        features: data.features.map(f => {
            let num = null;
            /* Ø£ÙˆÙ„Ø§Ù‹: Ø¹Ø¨Ø± id Ø§Ù„Ù…Ø¨Ø§Ø´Ø± */
            if (f.properties.id) num = ID_TO_NUM[f.properties.id];
            /* Ø«Ø§Ù†ÙŠØ§Ù‹: Ø¹Ø¨Ø± Ø§Ù„Ø§Ø³Ù… */
            if (!num) num = getRegionNumber(f.properties);
            if (!num) return null; /* ØªØ¬Ø§Ù‡Ù„ features ØºÙŠØ± Ø§Ù„Ù…Ø¹Ø±Ù‘ÙØ© */
            const maId = Object.keys(ID_TO_NUM).find(k => ID_TO_NUM[k] === num);
            return { ...f, properties: { ...f.properties, id: maId } };
        }).filter(Boolean)
    };
}

/* â”€â”€ ØªØ­Ù…ÙŠÙ„ GeoJSON: Ø£ÙˆÙ„Ø§Ù‹ ma.json Ø§Ù„Ù…Ø­Ù„ÙŠØŒ Ø«Ù… Ø§Ù„Ù…ØµØ¯Ø± Ø§Ù„Ø®Ø§Ø±Ø¬ÙŠ â”€â”€ */
fetch('ma.json')
    .then(r => { if (!r.ok) throw new Error('ma.json: HTTP ' + r.status); return r.json(); })
    .then(data => {
        const normalized = normalizeFeatures(data);
        if (normalized.features.length >= 10) {
            /* ma.json ÙŠØ­ØªÙˆÙŠ Ø¹Ù„Ù‰ Ø¨ÙŠØ§Ù†Ø§Øª ÙƒØ§ÙÙŠØ© â€” Ø§Ø³ØªØ®Ø¯Ù…Ù‡ Ù…Ø¨Ø§Ø´Ø±Ø© */
            processGeoJSON(normalized);
        } else {
            throw new Error('ma.json: Ø¨ÙŠØ§Ù†Ø§Øª ØºÙŠØ± ÙƒØ§ÙÙŠØ©');
        }
    })
    .catch(err => {
        console.warn('ma.json ØºÙŠØ± ÙƒØ§ÙÙØŒ Ø¬Ø§Ø±ÙŠ ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ù…ØµØ¯Ø± Ø§Ù„Ø®Ø§Ø±Ø¬ÙŠ â€”', err);
        fetch('https://raw.githubusercontent.com/manalhama/Morocco-geojson/master/maroc.geojson')
            .then(r => { if (!r.ok) throw new Error('HTTP ' + r.status); return r.json(); })
            .then(data => processGeoJSON(normalizeFeatures(data)))
            .catch(e => {
                console.error('ÙØ´Ù„ ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø®Ø±ÙŠØ·Ø© Ù…Ù† Ø¬Ù…ÙŠØ¹ Ø§Ù„Ù…ØµØ§Ø¯Ø± â€”', e);
                setTimeout(buildArrows, 700);
            });
    });

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   CARD EVENTS
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
document.querySelectorAll('.region-card').forEach(card => {
    const num = parseInt(card.dataset.region);
    card.addEventListener('mouseenter', () => {
        highlightRegion(num, true);
        highlightDot(num, true);
        showArrow(num);
        updateArrowPositions();
    });
    card.addEventListener('mouseleave', () => {
        highlightRegion(num, false);
        highlightDot(num, false);
        hideArrow(num);
    });
    card.addEventListener('click', () => openModal(num));
});

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   ARROWS
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
const svgEl = document.getElementById('arrows-svg');
const arrowPaths = {};

function getCardCenter(num) {
    const card = document.getElementById(`b${num}`);
    if (!card) return null;
    const r = card.getBoundingClientRect();
    return { x: r.left + r.width / 2, y: r.top + r.height / 2 };
}

function getDotCenter(num) {
    const marker = dotMarkers[num];
    if (!marker) return null;
    const el = marker.getElement();
    if (!el) return null;
    const r = el.getBoundingClientRect();
    return { x: r.left + r.width / 2, y: r.top + r.height / 2 };
}

function buildArrows() {
    svgEl.innerHTML = `<defs>
        <marker id="arrowhead" markerWidth="7" markerHeight="7" refX="5" refY="3" orient="auto">
            <path d="M0,0 L0,6 L7,3 z" fill="#c9a030" opacity="0.88"/>
        </marker>
    </defs>`;
    arrowPaths.paths = {};

    if (window.innerWidth < 1100) return;

    for (let n = 1; n <= 12; n++) {
        const path = document.createElementNS('http://www.w3.org/2000/svg', 'path');
        path.setAttribute('class', 'arrow-path');
        path.setAttribute('marker-end', 'url(#arrowhead)');
        svgEl.appendChild(path);
        arrowPaths.paths[n] = path;
    }
    updateArrowPositions();
}

function updateArrowPositions() {
    if (window.innerWidth < 1100) return;
    for (let n = 1; n <= 12; n++) {
        const path = arrowPaths.paths && arrowPaths.paths[n];
        if (!path) continue;
        const card = getCardCenter(n);
        const dot  = getDotCenter(n);
        if (!card || !dot) continue;
        const mx = (card.x + dot.x) / 2;
        const my = Math.min(card.y, dot.y) - 28;
        path.setAttribute('d', `M${card.x},${card.y} Q${mx},${my} ${dot.x},${dot.y}`);
    }
}

function showArrow(num) {
    const p = arrowPaths.paths && arrowPaths.paths[num];
    if (p) p.classList.add('active');
}
function hideArrow(num) {
    const p = arrowPaths.paths && arrowPaths.paths[num];
    if (p) p.classList.remove('active');
}

/* Map move/zoom â†’ update arrows */
map.on('zoom move zoomend moveend', updateArrowPositions);

/* Resize + Scroll */
let resizeTimer;
window.addEventListener('resize', () => {
    clearTimeout(resizeTimer);
    resizeTimer = setTimeout(buildArrows, 160);
});
window.addEventListener('scroll', updateArrowPositions, { passive: true });

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   MODAL
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
function openModal(num) {
    const r = REGIONS[num];
    if (!r) return;
    document.getElementById('modalNum').textContent         = num;
    document.getElementById('modalRegionLabel').textContent = r.label;
    document.getElementById('modalTitle').textContent       = r.name;
    document.getElementById('modalImg').src                 = r.logo;
    document.getElementById('modal').classList.add('open');
}
function closeModal() {
    document.getElementById('modal').classList.remove('open');
}
document.getElementById('modalClose').addEventListener('click', closeModal);
document.getElementById('modalCloseBtn').addEventListener('click', closeModal);
document.getElementById('modal').addEventListener('click', e => {
    if (e.target === document.getElementById('modal')) closeModal();
});
</script>
</body>
</html>
